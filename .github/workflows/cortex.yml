name: CORTEX
on: 
  workflow_dispatch:
  push:
    branches: [ main, master ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Create Main System
      uses: "DamianReeves/write-file-action@master"
      with:
        path: cortex/main.py
        contents: |
          #!/usr/bin/env python3
          print("ðŸ§  CORTEX System v1.0.0")
          print("C.O.R.T.E.X.!")
          import asyncio, datetime
          async def main():
              print(f"âœ… Sistema operacional: {datetime.datetime.now()}")
          asyncio.run(main())
        write-mode: overwrite

    - name: Create Requirements
      uses: "DamianReeves/write-file-action@master"
      with:
        path: cortex/requirements.txt
        contents: |
          cryptography>=41.0.0
          netifaces>=0.11.0
          psutil>=5.9.0
        write-mode: overwrite

    - name: Create README
      uses: "DamianReeves/write-file-action@master"
      with:
        path: cortex/README.md
        contents: |
          # ðŸ§  CORTEX System!
          ## Uso
          ```bash
          pip install -r requirements.txt
          python main.py
          ```
        write-mode: overwrite

    - name: Create ZIP
      run: zip -r cortex-browser.zip cortex/

    - name: Upload ZIP
      uses: actions/upload-artifact@v3
      with:
        name: cortex
        path: cortex.zip
