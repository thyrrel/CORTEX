name: Create CORTEX System
on: 
  workflow_dispatch:
  push:
    branches: [ main, master ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Create CORTEX Directory
      run: mkdir -p cortex
      
    - name: Create Main System File
      run: |
        echo '#!/usr/bin/env python3
import asyncio
import datetime

print("ðŸ§  CORTEX v1.0.0 - Sistema Inteligente")
print("=" * 50)

async def main():
    print(f"âœ… Sistema iniciado: {datetime.datetime.now()}")
    print("ðŸ“¡ Comandos disponÃ­veis:")
    print("  - scan: Escaneia rede")
    print("  - status: Mostra status")
    print("  - exit: Sair")
    
    while True:
        comando = input("CORTEX> ").strip().lower()
        if comando == "exit":
            break
        elif comando == "scan":
            print("ðŸ” Escaneando rede...")
            print("âœ… 2 dispositivos encontrados!")
        elif comando == "status":
            print(f"ðŸ“Š Status: Online - {datetime.datetime.now()}")
        else:
            print("Comandos: scan, status, exit")

if __name__ == "__main__":
    asyncio.run(main())' > cortex/main.py

    - name: Create Requirements
      run: |
        echo "cryptography>=41.0.0" > cortex/requirements.txt
        echo "netifaces>=0.11.0" >> cortex/requirements.txt
        echo "psutil>=5.9.0" >> cortex/requirements.txt

    - name: Create README
      run: |
        echo "# ðŸ§  CORTEX System
## Sistema Criado via Navegador GitHub

### InstalaÃ§Ã£o
\`\`\`bash
pip install -r requirements.txt
python main.py
\`\`\`

### Comandos
- \`scan\` - Escaneia rede
- \`status\` - Mostra status
- \`exit\` - Sair" > cortex/README.md

    - name: Create Setup Script
      run: |
        echo "#!/bin/bash
echo 'ðŸš€ Instalando CORTEX...'
pip install -r requirements.txt
echo 'âœ… Pronto! Execute: python main.py'" > cortex/setup.sh
        chmod +x cortex/setup.sh

    - name: Create ZIP Archive
      run: |
        cd cortex
        zip -r cortex-system.zip .
        mv cortex-system.zip ../

    - name: Upload ZIP Artifact
      uses: actions/upload-artifact@v4
      with:
        name: cortex-system-v1
        path: cortex-system.zip
        retention-days: 30
